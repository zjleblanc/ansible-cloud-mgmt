---
- hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Create in-memory test inventory
      loop: ['host_one','host_two','host_three']
      ansible.builtin.add_host:
        hostname: "{{ item }}"
        groups: local_three
        ansible_connection: local

- hosts: local_three
  gather_facts: false
  become: false

  tasks:
    - name: task one
      ansible.builtin.assert:
        that: inventory_hostname != 'host_one'
        fail_msg: You fell victim to one of the classic blunders

    - name: task two
      ansible.builtin.assert:
        that: inventory_hostname != 'host_two'
        fail_msg: You're gonna need a bigger server

    - name: task three
      ansible.builtin.assert:
        that: inventory_hostname != 'host_three'
        fail_msg: There have always been ghosts in this machine